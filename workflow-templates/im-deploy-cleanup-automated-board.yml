# Workflow Code: PitifulPelican_v2    DO NOT REMOVE

name: Cleanup Automated Deployment Board

# See the following site for help creating the right cron syntax: https://crontab.guru/
# The cron job is specified in UTC.
on:
  schedule:
    - cron: '30 6 * * 0' # Every Sunday at 06:30 UTC
  workflow_dispatch:

jobs:
  cleanup-board:
    runs-on: ubuntu-latest # Force this to run on github-hosted runner by using a tag that does not exist on self-hosted runners
    steps:
      - name: Cleanup
        uses: im-open/cleanup-deployment-board@v1.0.0
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }} # Special per-job token generated by GH for interacting with the repo
          board-number: '' # TODO:  Add the project board number

          # Inactive cards are the only thing this workflow will cleanup
          # Inactive cards are not currently deployed and do not have an open branch associated with them.
          #
          # Foreach release type (branch/tag/sha) you need to specify
          # 1- A strategy for the cleanup.  It can be age or number.
          #    Age: The max age in days an inactive card can be
          #    Number: The max number of inactive releases to keep
          # 2 - Threshold.  This is a positive whole number representing either the max age in days or the number of releases to keep.
          #     This threshold does not include any of the active cards.  It only applies to the inactive ones.
          #
          # See https://github.com/im-open/cleanup-deployment-board/ for more information

          # TODO:  Set the clean up strategy and threshold for branch, tag and sha
          branch-cleanup-strategy: '' # age|number
          branch-threshold: '' # positive whole number representing max age in days or number of inactive releases to keep

          tag-cleanup-strategy: '' # age|number
          tag-threshold: '' # positive whole number representing max age in days or number of inactive releases to keep

          sha-cleanup-strategy: '' # age|number
          sha-threshold: '' # positive whole number representing max age in days or number of inactive releases to keep